{
  "project": "feff10-rs",
  "branchName": "ralph/feff10-rust-true-compute-rewrite",
  "description": "Rewrite FEFF10 into true-compute Rust with no Fortran runtime dependency while preserving compatibility contracts and oracle parity.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Freeze migration contract references",
      "description": "As a migration lead, I want one authoritative set of contract artifacts so implementation decisions remain consistent.",
      "acceptanceCriteria": [
        "Reference compatibility matrix, fixture manifest, numeric tolerance policy, boundary map, and D-4 error contract from one central migration doc.",
        "Document that these artifacts are release-blocking references for module rewrites.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Define baseline-copy runtime guardrails",
      "description": "As a maintainer, I want an explicit prohibited-behavior definition so runtime code cannot generate outputs by copying baselines.",
      "acceptanceCriteria": [
        "Define prohibited runtime reads and copies from artifacts/fortran-baselines for module output generation.",
        "Define allowed baseline usage only for validation tooling and tests.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Refactor pipeline compute-engine interfaces",
      "description": "As a developer, I want explicit compute-engine interfaces so module runtime paths are separated from validation helpers.",
      "acceptanceCriteria": [
        "Add or refine shared pipeline interfaces for compute-only module execution.",
        "Ensure runtime pipeline execution paths do not depend on baseline materialization helpers.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Add dual-run oracle command plumbing",
      "description": "As a release engineer, I want deterministic oracle runner plumbing so Rust and Fortran runs can be compared in one flow.",
      "acceptanceCriteria": [
        "Provide command-level support to run Rust actual generation and Fortran oracle capture for the same fixture set.",
        "Ensure oracle execution remains validation-only and is not used by production module commands.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Extend regression reports for oracle parity",
      "description": "As a release owner, I want oracle-aware reports so parity gate failures are actionable.",
      "acceptanceCriteria": [
        "Report includes fixture-level and artifact-level mismatch details for oracle comparisons.",
        "Report output remains machine-readable JSON and human-readable summary text.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Close parser coverage gaps for manifest fixtures",
      "description": "As a module implementer, I want parser coverage for all fixture entry cards so module compute engines receive typed inputs.",
      "acceptanceCriteria": [
        "Parse all entry decks referenced by tasks/golden-fixture-manifest.json without unsupported-card failures.",
        "Add fixture-driven parser tests covering any newly supported cards.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Harden parser deterministic error mapping",
      "description": "As a maintainer, I want parser failures mapped to D-4 categories so diagnostics and exit codes are stable.",
      "acceptanceCriteria": [
        "Parser invalid-input paths emit deterministic INPUT category placeholders and messages.",
        "Snapshot tests cover representative invalid deck cases and expected diagnostics.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Harden numerics policy compliance",
      "description": "As a domain engineer, I want numerics behavior aligned to D-3 so comparator and module math use one policy.",
      "acceptanceCriteria": [
        "Implement and test Fortran D/d exponent parsing in numeric tokenization paths.",
        "Enforce NaN/Inf mismatch behavior and first-match tolerance category resolution in comparisons.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Implement deterministic artifact serialization utilities",
      "description": "As a module developer, I want shared text and binary serializers so output contracts stay deterministic.",
      "acceptanceCriteria": [
        "Add reusable utilities for deterministic text formatting and binary artifact writing.",
        "Validate same-input repeated writes produce stable outputs on the same target.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Split CI quality and oracle parity gates",
      "description": "As a release owner, I want separate mandatory CI lanes so primary Rust quality checks remain fast and oracle parity remains strict.",
      "acceptanceCriteria": [
        "Primary quality gate runs cargo check/test/clippy/fmt without requiring Fortran runtime tools.",
        "Protected parity gate runs oracle comparisons and uploads diff artifacts on failure.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Implement RDINP true-compute artifact generation",
      "description": "As a user, I want RDINP to generate downstream artifacts in Rust so core-chain modules no longer rely on baseline materialization.",
      "acceptanceCriteria": [
        "RDINP computes required outputs listed in the compatibility matrix, including conditional screen.inp behavior.",
        "Runtime RDINP execution does not copy outputs from artifacts/fortran-baselines.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Add RDINP oracle parity coverage",
      "description": "As a release engineer, I want RDINP oracle parity checks so migration confidence is measurable.",
      "acceptanceCriteria": [
        "Run RDINP parity on FX-RDINP-001 and FX-WORKFLOW-XAS-001 using oracle comparison flow.",
        "Mismatch reports include artifact-level failure reasons.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-013",
      "title": "Replace POT baseline materialization with compute path",
      "description": "As a user, I want POT outputs computed by Rust so runtime no longer replays baseline files.",
      "acceptanceCriteria": [
        "POT computes pot.bin, pot.dat, log1.dat, convergence.scf, and convergence.scf.fine from staged inputs.",
        "POT runtime path no longer reads baseline artifacts for output generation.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 13,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-014",
      "title": "Add POT oracle parity coverage",
      "description": "As a release engineer, I want POT parity checks so required outputs remain equivalent under policy.",
      "acceptanceCriteria": [
        "Run POT parity on FX-POT-001 and FX-WORKFLOW-XAS-001 using oracle flow.",
        "Tolerance and exact-text modes are applied per tasks/numeric-tolerance-policy.json.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 14,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-015",
      "title": "Replace SCREEN baseline materialization with compute path",
      "description": "As a user, I want SCREEN outputs computed in Rust so screened-core-hole workflows are native.",
      "acceptanceCriteria": [
        "SCREEN computes wscrn.dat and logscreen.dat from required inputs with optional screen.inp support.",
        "SCREEN runtime path does not materialize outputs from baseline snapshots.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 15,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-016",
      "title": "Add SCREEN oracle parity coverage",
      "description": "As a release engineer, I want SCREEN parity checks so optional-input behavior stays compatible.",
      "acceptanceCriteria": [
        "Run SCREEN parity on FX-SCREEN-001 including optional screen.inp cases.",
        "Failure output identifies input-contract and artifact mismatches deterministically.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 16,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-017",
      "title": "Replace CRPA baseline materialization with compute path",
      "description": "As a user, I want CRPA outputs computed in Rust so screening behavior is native.",
      "acceptanceCriteria": [
        "CRPA computes wscrn.dat and logs from crpa.inp, pot.inp, and geom.dat.",
        "CRPA runtime path no longer copies output artifacts from baselines.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 17,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-018",
      "title": "Add CRPA oracle parity coverage",
      "description": "As a release engineer, I want CRPA parity checks so screening outputs remain equivalent.",
      "acceptanceCriteria": [
        "Run CRPA parity on FX-CRPA-001 via oracle comparison flow.",
        "Parity reports capture tolerance results and contract failures per artifact.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 18,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-019",
      "title": "Replace XSPH baseline materialization with compute path",
      "description": "As a user, I want XSPH outputs computed in Rust so phase and xsect artifacts are natively generated.",
      "acceptanceCriteria": [
        "XSPH computes phase.bin, xsect.dat, and log2.dat with optional wscrn.dat behavior.",
        "XSPH runtime no longer copies outputs from baseline snapshots.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 19,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-020",
      "title": "Add XSPH oracle parity coverage",
      "description": "As a release engineer, I want XSPH parity checks so downstream phase consumers remain stable.",
      "acceptanceCriteria": [
        "Run XSPH parity on FX-XSPH-001 and FX-WORKFLOW-XAS-001 including optional wscrn cases.",
        "Parity output includes binary and numeric artifact comparison outcomes.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 20,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-021",
      "title": "Replace PATH baseline materialization with compute path",
      "description": "As a user, I want PATH outputs computed in Rust so path listings and binaries are native.",
      "acceptanceCriteria": [
        "PATH computes paths.dat, paths.bin, crit.dat, and log4.dat from staged inputs.",
        "PATH runtime path does not copy outputs from baseline fixtures.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 21,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-022",
      "title": "Add PATH oracle parity coverage",
      "description": "As a release engineer, I want PATH parity checks so exact-text and numeric path outputs stay compliant.",
      "acceptanceCriteria": [
        "Run PATH parity on FX-PATH-001 and FX-WORKFLOW-XAS-001 via oracle flow.",
        "Ensure paths.dat exact-text comparisons follow path_listing_reports policy.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 22,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-023",
      "title": "Replace FMS baseline materialization with compute path",
      "description": "As a user, I want FMS outputs computed in Rust so scattering binaries are natively generated.",
      "acceptanceCriteria": [
        "FMS computes gg.bin and log3.dat from staged inputs.",
        "FMS runtime path no longer copies output artifacts from baseline snapshots.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 23,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-024",
      "title": "Add FMS oracle parity coverage",
      "description": "As a release engineer, I want FMS parity checks so downstream COMPTON/FULLSPECTRUM dependencies remain stable.",
      "acceptanceCriteria": [
        "Run FMS parity on FX-FMS-001 and FX-WORKFLOW-XAS-001 via oracle flow.",
        "Validate binary output contract expectations for gg.bin in parity reporting.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 24,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-025",
      "title": "Implement BAND true-compute runtime path",
      "description": "As a user, I want BAND outputs computed in Rust so bandstructure artifacts are not baseline-replayed.",
      "acceptanceCriteria": [
        "BAND computes bandstructure.dat and logband.dat from required staged inputs.",
        "Runtime BAND execution does not copy outputs from artifacts/fortran-baselines.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 25,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-026",
      "title": "Add BAND oracle parity and capture flow",
      "description": "As a release engineer, I want BAND parity checks with capture support so requires_fortran_capture fixtures remain validated.",
      "acceptanceCriteria": [
        "Run BAND parity on FX-BAND-001 using oracle capture flow.",
        "Document and test the fortran-capture prerequisite path for BAND fixture validation.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 26,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-027",
      "title": "Implement LDOS true-compute runtime path",
      "description": "As a user, I want LDOS outputs computed in Rust so DOS tables are natively generated.",
      "acceptanceCriteria": [
        "LDOS computes required ldos*.dat outputs and logdos.dat from staged inputs.",
        "Runtime LDOS execution does not materialize outputs by baseline copy.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 27,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-028",
      "title": "Add LDOS oracle parity coverage",
      "description": "As a release engineer, I want LDOS parity checks so density-table tolerances are continuously enforced.",
      "acceptanceCriteria": [
        "Run LDOS parity on FX-LDOS-001 using density_tables tolerance category.",
        "Report includes artifact-level tolerance metrics for failed comparisons.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 28,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-029",
      "title": "Implement COMPTON true-compute runtime path",
      "description": "As a user, I want COMPTON outputs computed in Rust so mixed binary/text workflows are native.",
      "acceptanceCriteria": [
        "COMPTON computes compton.dat, jzzp.dat, rhozzp.dat, and logcompton.dat from staged inputs.",
        "Runtime COMPTON execution no longer copies outputs from baseline snapshots.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 29,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-030",
      "title": "Add COMPTON oracle parity coverage",
      "description": "As a release engineer, I want COMPTON parity checks so spectral output tolerances remain controlled.",
      "acceptanceCriteria": [
        "Run COMPTON parity on FX-COMPTON-001 via oracle flow.",
        "Include mixed binary/text input contract tests in regression coverage.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 30,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-031",
      "title": "Implement DEBYE true-compute runtime path",
      "description": "As a user, I want DEBYE outputs computed in Rust so thermal workflows are generated natively.",
      "acceptanceCriteria": [
        "DEBYE computes required s2 outputs and updated spectrum artifacts from staged inputs.",
        "Optional spring.inp behavior is supported without baseline materialization.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 31,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-032",
      "title": "Add DEBYE oracle parity coverage",
      "description": "As a release engineer, I want DEBYE parity checks so thermal tolerance categories are enforced.",
      "acceptanceCriteria": [
        "Run DEBYE parity on FX-DEBYE-001 using thermal_workflow_tables tolerances where applicable.",
        "Report captures optional spring-driven artifact comparison outcomes.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 32,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-033",
      "title": "Implement DMDW true-compute runtime path",
      "description": "As a user, I want DMDW outputs computed in Rust so dynamic Debye workflows are native.",
      "acceptanceCriteria": [
        "DMDW computes dmdw.out from dmdw.inp and feff.dym using Rust runtime logic.",
        "Runtime DMDW execution does not copy outputs from baseline snapshots.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 33,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-034",
      "title": "Add DMDW oracle parity coverage",
      "description": "As a release engineer, I want DMDW parity checks so dynamic thermal behavior stays policy-compliant.",
      "acceptanceCriteria": [
        "Run DMDW parity on FX-DMDW-001 using oracle flow.",
        "Include feff.dym input contract validation and comparison diagnostics.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 34,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-035",
      "title": "Implement SELF true-compute runtime path",
      "description": "As a user, I want SELF outputs computed in Rust so self-energy workflows are native.",
      "acceptanceCriteria": [
        "SELF enforces one-of required spectrum inputs and computes required output set.",
        "Runtime SELF execution does not generate outputs by baseline copy.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 35,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-036",
      "title": "Add SELF oracle parity coverage",
      "description": "As a release engineer, I want SELF parity checks so rewritten spectra and logs remain compatible.",
      "acceptanceCriteria": [
        "Run SELF parity on FX-SELF-001 through oracle comparison flow.",
        "Validate output set includes expected rewritten spectra and log artifacts.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 36,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-037",
      "title": "Implement EELS true-compute runtime path",
      "description": "As a user, I want EELS outputs computed in Rust so ELNES workflows are native.",
      "acceptanceCriteria": [
        "EELS computes eels.dat and logeels.dat with optional magic.dat generation behavior.",
        "Runtime EELS execution does not copy outputs from baseline snapshots.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 37,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-038",
      "title": "Add EELS oracle parity coverage",
      "description": "As a release engineer, I want EELS parity checks so columnar spectra tolerances are enforced.",
      "acceptanceCriteria": [
        "Run EELS parity on FX-EELS-001 via oracle flow.",
        "Validate optional magic output behavior and tolerance-mode comparisons.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 38,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-039",
      "title": "Implement FULLSPECTRUM true-compute runtime path",
      "description": "As a user, I want FULLSPECTRUM outputs computed in Rust so combined-spectrum workflows are native.",
      "acceptanceCriteria": [
        "FULLSPECTRUM computes xmu.dat, osc_str.dat, eps.dat, drude.dat, background.dat, fine_st.dat, and logfullspectrum.dat.",
        "Runtime FULLSPECTRUM execution does not materialize outputs from baseline snapshots.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 39,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-040",
      "title": "Add FULLSPECTRUM oracle parity and capture coverage",
      "description": "As a release engineer, I want FULLSPECTRUM parity checks with capture support so requires_fortran_capture fixtures remain validated.",
      "acceptanceCriteria": [
        "Run FULLSPECTRUM parity on FX-FULLSPECTRUM-001 using oracle capture flow.",
        "Verify fixture capture prerequisites and parity reporting for full output set.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 40,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-041",
      "title": "Implement RIXS true-compute runtime path",
      "description": "As a user, I want RIXS outputs computed in Rust so multi-edge spectroscopy workflows are native.",
      "acceptanceCriteria": [
        "RIXS computes required rixs*.dat outputs and logrixs.dat from staged multi-edge inputs.",
        "Runtime RIXS execution does not copy outputs from baseline snapshots.",
        "Module tests pass",
        "Typecheck passes"
      ],
      "priority": 41,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-042",
      "title": "Add RIXS oracle parity for reference-file fixture mode",
      "description": "As a release engineer, I want RIXS parity checks compatible with reference-file baselines so fixture validation remains strict.",
      "acceptanceCriteria": [
        "Run RIXS parity on FX-RIXS-001 with reference-file baseline handling.",
        "Verify comparator behavior for canonical and reference-named RIXS artifacts.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 42,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-043",
      "title": "Remove runtime baseline path dependencies from CLI module commands",
      "description": "As a maintainer, I want runtime commands decoupled from artifacts/fortran-baselines so production behavior is fully compute-driven.",
      "acceptanceCriteria": [
        "Module CLI execution paths no longer rely on baseline-root-relative CWD behavior.",
        "Runtime module command selection remains compatibility-compliant after decoupling.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 43,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-044",
      "title": "Add regression guards against baseline-copy runtime regressions",
      "description": "As a release owner, I want explicit guard tests so baseline-copy runtime behavior cannot be reintroduced.",
      "acceptanceCriteria": [
        "Add tests that fail if runtime module execution reads artifacts/fortran-baselines for output generation.",
        "Add tests that verify baseline artifacts are used only in validation flows.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 44,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-045",
      "title": "Re-run cutover and rollback rehearsals with true-compute binaries",
      "description": "As an operator, I want updated rehearsal evidence so GA readiness reflects true-compute runtime behavior.",
      "acceptanceCriteria": [
        "Execute cutover checklist using true-compute Rust binaries on GA targets.",
        "Execute rollback checklist and validate restoration to stable Fortran bundle.",
        "Publish dated rehearsal reports under tasks/.",
        "Tests pass",
        "Typecheck passes"
      ],
      "priority": 45,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-046",
      "title": "Refresh developer and operator documentation for true-compute runtime",
      "description": "As a maintainer, I want documentation aligned with the new runtime model so users and developers follow correct workflows.",
      "acceptanceCriteria": [
        "Update developer workflow docs to separate runtime execution from oracle validation workflows.",
        "Update operator and troubleshooting docs for deferred MPI and true-compute runtime expectations.",
        "Documentation checks pass where configured.",
        "Typecheck passes"
      ],
      "priority": 46,
      "passes": false,
      "notes": ""
    }
  ]
}
